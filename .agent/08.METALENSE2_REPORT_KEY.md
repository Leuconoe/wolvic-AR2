# METALENSE2 핵심 해결 정보 (요약본)

## 문제의 핵심 원인

- Snapdragon Spaces 런타임이 **6개 OpenXR 레이어 합성**을 감당하지 못해 swapchain 이미지 반환이 지연됨.
- `xrWaitSwapchainImage(XR_INFINITE_DURATION)`가 **1초씩 블록**되어 양 눈 합계 2초/frame 발생.

## 결정적 증거

- `xrWaitFrame`/`xrBeginFrame`/`xrEndFrame` 모두 수 ms 수준
- 실제 2초 지연은 **렌더링 단계에서 발생**
- 계측 결과: Left/Right 각각 1000ms 대기

## 해결책

- SPACES 빌드에서 **compositor 레이어 비활성화**
- `layersEnabled = false`로 강제하여 **projection layer 하나만 제출**

## 결과

- **90 FPS** 유지, 풀 해상도(100%)에서도 안정
- 프레임 델타 7~14ms
- 레이어 수 6 → 1 감소

## 핵심 변경 파일

- [app/src/openxr/cpp/DeviceDelegateOpenXR.cpp](app/src/openxr/cpp/DeviceDelegateOpenXR.cpp)

## 남은 리스크

- SPACES 전체 디바이스에서 UI 렌더링 품질/기능 확인 필요
- GPU perf hint는 여전히 무시되지만, 현재 해결책으로 실사용 성능 문제는 해소됨
